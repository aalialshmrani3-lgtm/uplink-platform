# ุงูุญู ุงูููุงุฆู ููุดููุฉ ูุดู ุชุญููู ุงููุนุงููุฉ

**ุงูุชุงุฑูุฎ:** 2026-02-07  
**ุงููุดููุฉ:** ุงููุนุงููุฉ ูุง ุชุญูู ููุฐ ุดูุฑ ูุงูู ูุน ุฎุทุฃ idb timeout ููุดู ุงูุงุชุตุงู ุจุงูุฎุงุฏู

---

## ๐ ุงูุชุดุฎูุต

### ุงููุดุงูู ุงูููุชุดูุฉ:
1. **ุนูููุงุช drizzle-kit ูุชุนุฏุฏุฉ ุนุงููุฉ** (3 ุนูููุงุช `pnpm db:push` ูู ุชูุชูู)
2. **TypeScript compiler ูุณุชููู 231MB ุฐุงูุฑุฉ**
3. **ุงุณุชููุงู ุฐุงูุฑุฉ ุนุงูู:** 2.3GB ูุณุชุฎุฏู ูู 3.8GB + 1GB swap
4. **ุนูููุงุช node ูุชุนุฏุฏุฉ** (20+ ุนูููุฉ)
5. **EMFILE: too many open files** - ุญุฏ ุงููููุงุช ุงูููุชูุญุฉ ููุฎูุถ
6. **Vite HMR WebSocket ูุงุดู** ุจุณุจุจ Manus proxy

---

## โ ุงูุญู ุงูููุงุฆู

### Phase 1: ุชูุธูู ุดุงูู
```bash
# ุฅููุงู ุฌููุน ุงูุนูููุงุช ุงูุนุงููุฉ
pkill -f "drizzle-kit"
pkill -f "db:push"
pkill -f "tsx"
pkill -f "tsc --noEmit"

# ุงููุชูุฌุฉ: ุชูููู ุงูุนูููุงุช ูู 20+ ุฅูู 7
```

### Phase 2: ุงุณุชุนุงุฏุฉ Checkpoint ูุธูู
```bash
# ุงุณุชุนุงุฏุฉ ุขุฎุฑ checkpoint ูุณุชูุฑ
webdev_rollback_checkpoint --version_id 17aa7587
```

### Phase 3: ุชุญุณูู ุงูุฃุฏุงุก
```bash
# 1. ุฒูุงุฏุฉ ุญุฏ ุงููููุงุช ุงูููุชูุญุฉ
ulimit -n 65536

# 2. ุชุญุณูู vite.config.ts
# ุฅุถุงูุฉ:
# - minify: 'esbuild'
# - target: 'es2020'
# - sourcemap: false
```

### Phase 4: ุจูุงุก Production Build
```bash
# ุจูุงุก production build ูุธูู
pnpm build

# ุงููุชูุฌุฉ:
# - index.html: 2.04 kB
# - CSS: 215.60 kB (gzip: 28.87 kB)
# - JS: 3,263.79 kB (gzip: 628.29 kB)
# - Backend: 258.9kb
# - Build time: 26.90s
```

### Phase 5: ุชุดุบูู Production Server
```bash
# ุชุดุบูู production server ุนูู port 3000
cd /home/ubuntu/uplink-platform
NODE_ENV=production PORT=3000 nohup node dist/index.js > /tmp/prod-server-new.log 2>&1 &

# ุงูุชุญูู:
curl -I http://localhost:3000
# HTTP/1.1 200 OK โ
```

---

## ๐ ุงููุชุงุฆุฌ

### ูุจู ุงูุญู:
- โ ุงุณุชููุงู ุฐุงูุฑุฉ: 2.3GB + 1GB swap
- โ ุนูููุงุช Node.js: 20+
- โ ุงููุนุงููุฉ: ูุดู ุงูุชุญููู
- โ EMFILE errors
- โ WebSocket HMR ูุงุดู

### ุจุนุฏ ุงูุญู:
- โ ุงุณุชููุงู ุฐุงูุฑุฉ: 1.5GB + 551MB swap (ุชูููุฑ 1.2GB)
- โ ุนูููุงุช Node.js: 7 ููุท
- โ ุงููุนุงููุฉ: ุชุนูู ุจุดูู ูุงูู (51 ุนูุตุฑ ุชูุงุนูู)
- โ ูุง ุฃุฎุทุงุก EMFILE
- โ Production server ูุณุชูุฑ

---

## ๐ฏ ุงูุญู ุงูุฏุงุฆู

### 1. ุงุณุชุฎุฏุงู Production Server ุจุฏูุงู ูู Dev Server
- Dev server ูุณุชููู ููุงุฑุฏ ูุซูุฑุฉ (HMR, TypeScript watch)
- Production server ุฎููู ููุณุชูุฑ

### 2. ุชุญุณูู vite.config.ts
```typescript
build: {
  minify: 'esbuild',
  target: 'es2020',
  sourcemap: false,
  // ... rest of config
}
```

### 3. ุฒูุงุฏุฉ ุญุฏ ุงููููุงุช ุงูููุชูุญุฉ
```bash
ulimit -n 65536
```

### 4. ุชูุธูู ุฏูุฑู ููุนูููุงุช ุงูุนุงููุฉ
```bash
# ุฅุถุงูุฉ ุฅูู cron job:
*/30 * * * * pkill -f "drizzle-kit" 2>/dev/null
```

---

## ๐ ุงูุงุณุชุฎุฏุงู ุงููุณุชูุจูู

### ุชุดุบูู ุงูุฎุงุฏู:
```bash
cd /home/ubuntu/uplink-platform
NODE_ENV=production PORT=3000 node dist/index.js
```

### ุฅุนุงุฏุฉ ุงูุจูุงุก:
```bash
pnpm build
```

### ุงูุชุญูู ูู ุงูุญุงูุฉ:
```bash
curl -I http://localhost:3000
ps aux | grep "node dist/index.js"
```

---

## โ ุชู ุงูุงุฎุชุจุงุฑ

- โ ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ ุชุญูููุช ุจุงููุงูู
- โ 51 ุนูุตุฑ ุชูุงุนูู ูุนูู
- โ ุงููุญุชูู ุงูุนุฑุจู ูุธูุฑ ุจุดูู ุตุญูุญ
- โ ุฌููุน ุงูุฃูุณุงู ููุฌูุฏุฉ
- โ ุงูุฅุญุตุงุฆูุงุช ุชุธูุฑ
- โ ุงููุญุฑูุงุช ุงูุซูุงุซุฉ ุชุนูู
- โ ุงูุฎุงุฏู ูุณุชูุฑ (ูุง ูุชุนุทู)

---

## ๐ ููุงุญุธุงุช

1. **Dev server ุบูุฑ ูุณุชูุฑ** ุจุณุจุจ Vite HMR WebSocket issues ูุน Manus proxy
2. **Production server ูู ุงูุญู ุงูุฃูุซู** ููุงุณุชูุฑุงุฑ ูุงูุฃุฏุงุก
3. **Mock data** ุชู ุฅุถุงูุชูุง ูุฌููุน ุงูุตูุญุงุช (UPLINK1, 2, 3)
4. **ูุนุงููุฑ ุงูุชูููู** ุชู ุชูุณูุนูุง ูู 6 ุฅูู 10 ูุนุงููุฑ
5. **TRLs ู Stage Gates** ุชู ุฅุถุงูุชูุง

---

**ุงูุฎูุงุตุฉ:** ุงููุดููุฉ ุชู ุญููุง ุจุดูู ููุงุฆู ูุฌุฐุฑู. ุงููุนุงููุฉ ุชุนูู ุงูุขู ุจุดูู ูุงูู ููุณุชูุฑ.
